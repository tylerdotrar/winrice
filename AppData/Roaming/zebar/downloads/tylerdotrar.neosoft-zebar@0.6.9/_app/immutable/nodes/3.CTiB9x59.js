import{f as z,a as f,t as $}from"../chunks/CRqFFjQj.js";import{M as j,C as L,o as m,F as B,G as S,L as N,w as G,N as C,O as d,D as v,I as M,P as F,J as I}from"../chunks/B18bf4ap.js";import{s as J}from"../chunks/B6RTX9pl.js";import{g,i as s,l as O,o as A,e as V,a as U,P as b,b as Z,S as k,c as E,T as p,W as P,B as q}from"../chunks/Bht1H1Pk.js";function x(){return new _(g(),window.__TAURI_INTERNALS__.metadata.currentWebview.label,{skip:!0})}async function W(){return s("plugin:webview|get_all_webviews").then(a=>a.map(e=>new _(new P(e.windowLabel,{skip:!0}),e.label,{skip:!0})))}const h=["tauri://created","tauri://error"];class _{constructor(e,t,i){this.window=e,this.label=t,this.listeners=Object.create(null),i?.skip||s("plugin:webview|create_webview",{windowLabel:e.label,options:{...i,label:t}}).then(async()=>this.emit("tauri://created")).catch(async n=>this.emit("tauri://error",n))}static async getByLabel(e){var t;return(t=(await W()).find(i=>i.label===e))!==null&&t!==void 0?t:null}static getCurrent(){return x()}static async getAll(){return W()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const i=this.listeners[e];i.splice(i.indexOf(t),1)}:O(e,t,{target:{kind:"Webview",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const i=this.listeners[e];i.splice(i.indexOf(t),1)}:A(e,t,{target:{kind:"Webview",label:this.label}})}async emit(e,t){if(h.includes(e)){for(const i of this.listeners[e]||[])i({event:e,id:-1,payload:t});return}return V(e,t)}async emitTo(e,t,i){if(h.includes(t)){for(const n of this.listeners[t]||[])n({event:t,id:-1,payload:i});return}return U(e,t,i)}_handleTauriEvent(e,t){return h.includes(e)?(e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t],!0):!1}async position(){return s("plugin:webview|webview_position",{label:this.label}).then(e=>new b(e))}async size(){return s("plugin:webview|webview_size",{label:this.label}).then(e=>new Z(e))}async close(){return s("plugin:webview|webview_close",{label:this.label})}async setSize(e){return s("plugin:webview|set_webview_size",{label:this.label,value:e instanceof k?e:new k(e)})}async setPosition(e){return s("plugin:webview|set_webview_position",{label:this.label,value:e instanceof E?e:new E(e)})}async setFocus(){return s("plugin:webview|set_webview_focus",{label:this.label})}async setAutoResize(e){return s("plugin:webview|set_webview_auto_resize",{label:this.label,value:e})}async hide(){return s("plugin:webview|webview_hide",{label:this.label})}async show(){return s("plugin:webview|webview_show",{label:this.label})}async setZoom(e){return s("plugin:webview|set_webview_zoom",{label:this.label,value:e})}async reparent(e){return s("plugin:webview|reparent",{label:this.label,window:typeof e=="string"?e:e.label})}async clearAllBrowsingData(){return s("plugin:webview|clear_all_browsing_data")}async setBackgroundColor(e){return s("plugin:webview|set_webview_background_color",{color:e})}async onDragDropEvent(e){const t=await this.listen(p.DRAG_ENTER,r=>{e({...r,payload:{type:"enter",paths:r.payload.paths,position:new b(r.payload.position)}})}),i=await this.listen(p.DRAG_OVER,r=>{e({...r,payload:{type:"over",position:new b(r.payload.position)}})}),n=await this.listen(p.DRAG_DROP,r=>{e({...r,payload:{type:"drop",paths:r.payload.paths,position:new b(r.payload.position)}})}),c=await this.listen(p.DRAG_LEAVE,r=>{e({...r,payload:{type:"leave"}})});return()=>{t(),n(),i(),c()}}}function T(){const a=x();return new w(a.label,{skip:!0})}async function D(){return s("plugin:window|get_all_windows").then(a=>a.map(e=>new w(e,{skip:!0})))}class w{constructor(e,t={}){var i;this.label=e,this.listeners=Object.create(null),t?.skip||s("plugin:webview|create_webview_window",{options:{...t,parent:typeof t.parent=="string"?t.parent:(i=t.parent)===null||i===void 0?void 0:i.label,label:e}}).then(async()=>this.emit("tauri://created")).catch(async n=>this.emit("tauri://error",n))}static async getByLabel(e){var t;const i=(t=(await D()).find(n=>n.label===e))!==null&&t!==void 0?t:null;return i?new w(i.label,{skip:!0}):null}static getCurrent(){return T()}static async getAll(){return D()}async listen(e,t){return this._handleTauriEvent(e,t)?()=>{const i=this.listeners[e];i.splice(i.indexOf(t),1)}:O(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async once(e,t){return this._handleTauriEvent(e,t)?()=>{const i=this.listeners[e];i.splice(i.indexOf(t),1)}:A(e,t,{target:{kind:"WebviewWindow",label:this.label}})}async setBackgroundColor(e){return s("plugin:window|set_background_color",{color:e}).then(()=>s("plugin:webview|set_webview_background_color",{color:e}))}}H(w,[P,_]);function H(a,e){(Array.isArray(e)?e:[e]).forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(i=>{var n;typeof a.prototype=="object"&&a.prototype&&i in a.prototype||Object.defineProperty(a.prototype,i,(n=Object.getOwnPropertyDescriptor(t.prototype,i))!==null&&n!==void 0?n:Object.create(null))})})}function y(a,e,t,i){const n=j({value:e});let c=null;t(()=>{c=T();const u=c.listen(`remote-state:${a}`,l=>{const o=l.payload;n.value=o.value});i(()=>{u.then(l=>{l()})})});const r={get(u,l){return typeof u[l]=="object"&&u[l]!==null?new Proxy(u[l],r):u[l]},set(u,l,o){return u[l]=o,c?.emit(`remote-state:${a}`,n),!0}};return new Proxy(n,r)}var K=z('<div class="bg-zb-base border-8 border-red-600 h-screen w-screen font-zb text-zb-text text-lg"> <!></div>');function ie(a,e){L(e,!0);let t=y("counter",0,v,d),i=y("enabled",!0,v,d),n=y("shown",!0,v,d);m(()=>{const o=g();console.log(i.value),o.setEnabled(i.value)}),m(()=>{const o=g();n.value?o.show():o.hide()});let c=C(()=>t.value+100);var r=K(),u=M(r),l=N(u);q(l,{callback:()=>{t.value=0},children:(o,Q)=>{F();var R=$("Reset Counter");f(o,R)},$$slots:{default:!0}}),I(r),B(o=>J(u,`Counter: ${o??""}
  Derived: ${G(c)??""} `),[()=>JSON.stringify(t,null,2)]),f(a,r),S()}export{ie as component};
